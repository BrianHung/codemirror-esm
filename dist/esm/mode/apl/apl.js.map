{"version":3,"file":"apl.js","sources":["../../../../src/mode/apl/apl.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/apl/apl.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"apl\", function() {\n    var builtInOps = {\n      \".\": \"innerProduct\",\n      \"\\\\\": \"scan\",\n      \"/\": \"reduce\",\n      \"⌿\": \"reduce1Axis\",\n      \"⍀\": \"scan1Axis\",\n      \"¨\": \"each\",\n      \"⍣\": \"power\"\n    };\n    var builtInFuncs = {\n      \"+\": [\"conjugate\", \"add\"],\n      \"−\": [\"negate\", \"subtract\"],\n      \"×\": [\"signOf\", \"multiply\"],\n      \"÷\": [\"reciprocal\", \"divide\"],\n      \"⌈\": [\"ceiling\", \"greaterOf\"],\n      \"⌊\": [\"floor\", \"lesserOf\"],\n      \"∣\": [\"absolute\", \"residue\"],\n      \"⍳\": [\"indexGenerate\", \"indexOf\"],\n      \"?\": [\"roll\", \"deal\"],\n      \"⋆\": [\"exponentiate\", \"toThePowerOf\"],\n      \"⍟\": [\"naturalLog\", \"logToTheBase\"],\n      \"○\": [\"piTimes\", \"circularFuncs\"],\n      \"!\": [\"factorial\", \"binomial\"],\n      \"⌹\": [\"matrixInverse\", \"matrixDivide\"],\n      \"<\": [null, \"lessThan\"],\n      \"≤\": [null, \"lessThanOrEqual\"],\n      \"=\": [null, \"equals\"],\n      \">\": [null, \"greaterThan\"],\n      \"≥\": [null, \"greaterThanOrEqual\"],\n      \"≠\": [null, \"notEqual\"],\n      \"≡\": [\"depth\", \"match\"],\n      \"≢\": [null, \"notMatch\"],\n      \"∈\": [\"enlist\", \"membership\"],\n      \"⍷\": [null, \"find\"],\n      \"∪\": [\"unique\", \"union\"],\n      \"∩\": [null, \"intersection\"],\n      \"∼\": [\"not\", \"without\"],\n      \"∨\": [null, \"or\"],\n      \"∧\": [null, \"and\"],\n      \"⍱\": [null, \"nor\"],\n      \"⍲\": [null, \"nand\"],\n      \"⍴\": [\"shapeOf\", \"reshape\"],\n      \",\": [\"ravel\", \"catenate\"],\n      \"⍪\": [null, \"firstAxisCatenate\"],\n      \"⌽\": [\"reverse\", \"rotate\"],\n      \"⊖\": [\"axis1Reverse\", \"axis1Rotate\"],\n      \"⍉\": [\"transpose\", null],\n      \"↑\": [\"first\", \"take\"],\n      \"↓\": [null, \"drop\"],\n      \"⊂\": [\"enclose\", \"partitionWithAxis\"],\n      \"⊃\": [\"diclose\", \"pick\"],\n      \"⌷\": [null, \"index\"],\n      \"⍋\": [\"gradeUp\", null],\n      \"⍒\": [\"gradeDown\", null],\n      \"⊤\": [\"encode\", null],\n      \"⊥\": [\"decode\", null],\n      \"⍕\": [\"format\", \"formatByExample\"],\n      \"⍎\": [\"execute\", null],\n      \"⊣\": [\"stop\", \"left\"],\n      \"⊢\": [\"pass\", \"right\"]\n    };\n\n    var isOperator = /[\\.\\/⌿⍀¨⍣]/;\n    var isNiladic = /⍬/;\n    var isFunction = /[\\+−×÷⌈⌊∣⍳\\?⋆⍟○!⌹<≤=>≥≠≡≢∈⍷∪∩∼∨∧⍱⍲⍴,⍪⌽⊖⍉↑↓⊂⊃⌷⍋⍒⊤⊥⍕⍎⊣⊢]/;\n    var isArrow = /←/;\n    var isComment = /[⍝#].*$/;\n\n    var stringEater = function(type) {\n      var prev;\n      prev = false;\n      return function(c) {\n        prev = c;\n        if (c === type) {\n          return prev === \"\\\\\";\n        }\n        return true;\n      };\n    };\n    return {\n      startState: function() {\n        return {\n          prev: false,\n          func: false,\n          op: false,\n          string: false,\n          escape: false\n        };\n      },\n      token: function(stream, state) {\n        var ch, funcName;\n        if (stream.eatSpace()) {\n          return null;\n        }\n        ch = stream.next();\n        if (ch === '\"' || ch === \"'\") {\n          stream.eatWhile(stringEater(ch));\n          stream.next();\n          state.prev = true;\n          return \"string\";\n        }\n        if (/[\\[{\\(]/.test(ch)) {\n          state.prev = false;\n          return null;\n        }\n        if (/[\\]}\\)]/.test(ch)) {\n          state.prev = true;\n          return null;\n        }\n        if (isNiladic.test(ch)) {\n          state.prev = false;\n          return \"niladic\";\n        }\n        if (/[¯\\d]/.test(ch)) {\n          if (state.func) {\n            state.func = false;\n            state.prev = false;\n          } else {\n            state.prev = true;\n          }\n          stream.eatWhile(/[\\w\\.]/);\n          return \"number\";\n        }\n        if (isOperator.test(ch)) {\n          return \"operator apl-\" + builtInOps[ch];\n        }\n        if (isArrow.test(ch)) {\n          return \"apl-arrow\";\n        }\n        if (isFunction.test(ch)) {\n          funcName = \"apl-\";\n          if (builtInFuncs[ch] != null) {\n            if (state.prev) {\n              funcName += builtInFuncs[ch][1];\n            } else {\n              funcName += builtInFuncs[ch][0];\n            }\n          }\n          state.func = true;\n          state.prev = false;\n          return \"function \" + funcName;\n        }\n        if (isComment.test(ch)) {\n          stream.skipToEnd();\n          return \"comment\";\n        }\n        if (ch === \"∘\" && stream.peek() === \".\") {\n          stream.next();\n          return \"function jot-dot\";\n        }\n        stream.eatWhile(/[\\w\\$_]/);\n        state.prev = true;\n        return \"keyword\";\n      }\n    };\n  });\n\n  CodeMirror.defineMIME(\"text/apl\", \"apl\");\n\n}"],"names":[],"mappings":"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"}