{"version":3,"file":"smalltalk.js","sources":["../../../../src/mode/smalltalk/smalltalk.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/smalltalk/smalltalk.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode('smalltalk', function(config) {\n\n    var specialChars = /[+\\-\\/\\\\*~<>=@%|&?!.,:;^]/;\n    var keywords = /true|false|nil|self|super|thisContext/;\n\n    var Context = function(tokenizer, parent) {\n      this.next = tokenizer;\n      this.parent = parent;\n    };\n\n    var Token = function(name, context, eos) {\n      this.name = name;\n      this.context = context;\n      this.eos = eos;\n    };\n\n    var State = function() {\n      this.context = new Context(next, null);\n      this.expectVariable = true;\n      this.indentation = 0;\n      this.userIndentationDelta = 0;\n    };\n\n    State.prototype.userIndent = function(indentation) {\n      this.userIndentationDelta = indentation > 0 ? (indentation / config.indentUnit - this.indentation) : 0;\n    };\n\n    var next = function(stream, context, state) {\n      var token = new Token(null, context, false);\n      var aChar = stream.next();\n\n      if (aChar === '\"') {\n        token = nextComment(stream, new Context(nextComment, context));\n\n      } else if (aChar === '\\'') {\n        token = nextString(stream, new Context(nextString, context));\n\n      } else if (aChar === '#') {\n        if (stream.peek() === '\\'') {\n          stream.next();\n          token = nextSymbol(stream, new Context(nextSymbol, context));\n        } else {\n          if (stream.eatWhile(/[^\\s.{}\\[\\]()]/))\n            token.name = 'string-2';\n          else\n            token.name = 'meta';\n        }\n\n      } else if (aChar === '$') {\n        if (stream.next() === '<') {\n          stream.eatWhile(/[^\\s>]/);\n          stream.next();\n        }\n        token.name = 'string-2';\n\n      } else if (aChar === '|' && state.expectVariable) {\n        token.context = new Context(nextTemporaries, context);\n\n      } else if (/[\\[\\]{}()]/.test(aChar)) {\n        token.name = 'bracket';\n        token.eos = /[\\[{(]/.test(aChar);\n\n        if (aChar === '[') {\n          state.indentation++;\n        } else if (aChar === ']') {\n          state.indentation = Math.max(0, state.indentation - 1);\n        }\n\n      } else if (specialChars.test(aChar)) {\n        stream.eatWhile(specialChars);\n        token.name = 'operator';\n        token.eos = aChar !== ';'; \n\n      } else if (/\\d/.test(aChar)) {\n        stream.eatWhile(/[\\w\\d]/);\n        token.name = 'number';\n\n      } else if (/[\\w_]/.test(aChar)) {\n        stream.eatWhile(/[\\w\\d_]/);\n        token.name = state.expectVariable ? (keywords.test(stream.current()) ? 'keyword' : 'variable') : null;\n\n      } else {\n        token.eos = state.expectVariable;\n      }\n\n      return token;\n    };\n\n    var nextComment = function(stream, context) {\n      stream.eatWhile(/[^\"]/);\n      return new Token('comment', stream.eat('\"') ? context.parent : context, true);\n    };\n\n    var nextString = function(stream, context) {\n      stream.eatWhile(/[^']/);\n      return new Token('string', stream.eat('\\'') ? context.parent : context, false);\n    };\n\n    var nextSymbol = function(stream, context) {\n      stream.eatWhile(/[^']/);\n      return new Token('string-2', stream.eat('\\'') ? context.parent : context, false);\n    };\n\n    var nextTemporaries = function(stream, context) {\n      var token = new Token(null, context, false);\n      var aChar = stream.next();\n\n      if (aChar === '|') {\n        token.context = context.parent;\n        token.eos = true;\n\n      } else {\n        stream.eatWhile(/[^|]/);\n        token.name = 'variable';\n      }\n\n      return token;\n    };\n\n    return {\n      startState: function() {\n        return new State;\n      },\n\n      token: function(stream, state) {\n        state.userIndent(stream.indentation());\n\n        if (stream.eatSpace()) {\n          return null;\n        }\n\n        var token = state.context.next(stream, state.context, state);\n        state.context = token.context;\n        state.expectVariable = token.eos;\n\n        return token.name;\n      },\n\n      blankLine: function(state) {\n        state.userIndent(0);\n      },\n\n      indent: function(state, textAfter) {\n        var i = state.context.next === next && textAfter && textAfter.charAt(0) === ']' ? -1 : state.userIndentationDelta;\n        return (state.indentation + i) * config.indentUnit;\n      },\n\n      electricChars: ']'\n    };\n\n  });\n\n  CodeMirror.defineMIME('text/x-stsrc', {name: 'smalltalk'});\n\n}"],"names":[],"mappings":"AAAA;AACe,mBAAS,UAAU,EAAE;AAEpC;AACA,EAAE,UAAU,CAAC,UAAU,CAAC,WAAW,EAAE,SAAS,MAAM,EAAE;AACtD;AACA,IAAI,IAAI,YAAY,GAAG,2BAA2B,CAAC;AACnD,IAAI,IAAI,QAAQ,GAAG,uCAAuC,CAAC;AAC3D;AACA,IAAI,IAAI,OAAO,GAAG,SAAS,SAAS,EAAE,MAAM,EAAE;AAC9C,MAAM,IAAI,CAAC,IAAI,GAAG,SAAS,CAAC;AAC5B,MAAM,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AAC3B,KAAK,CAAC;AACN;AACA,IAAI,IAAI,KAAK,GAAG,SAAS,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE;AAC7C,MAAM,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;AACvB,MAAM,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AAC7B,MAAM,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;AACrB,KAAK,CAAC;AACN;AACA,IAAI,IAAI,KAAK,GAAG,WAAW;AAC3B,MAAM,IAAI,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AAC7C,MAAM,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AACjC,MAAM,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;AAC3B,MAAM,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;AACpC,KAAK,CAAC;AACN;AACA,IAAI,KAAK,CAAC,SAAS,CAAC,UAAU,GAAG,SAAS,WAAW,EAAE;AACvD,MAAM,IAAI,CAAC,oBAAoB,GAAG,WAAW,GAAG,CAAC,IAAI,WAAW,GAAG,MAAM,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,IAAI,CAAC,CAAC;AAC7G,KAAK,CAAC;AACN;AACA,IAAI,IAAI,IAAI,GAAG,SAAS,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE;AAChD,MAAM,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AAClD,MAAM,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;AAChC;AACA,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;AACzB,QAAQ,KAAK,GAAG,WAAW,CAAC,MAAM,EAAE,IAAI,OAAO,CAAC,WAAW,EAAE,OAAO,CAAC,CAAC,CAAC;AACvE;AACA,OAAO,MAAM,IAAI,KAAK,KAAK,IAAI,EAAE;AACjC,QAAQ,KAAK,GAAG,UAAU,CAAC,MAAM,EAAE,IAAI,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,CAAC;AACrE;AACA,OAAO,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;AAChC,QAAQ,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,IAAI,EAAE;AACpC,UAAU,MAAM,CAAC,IAAI,EAAE,CAAC;AACxB,UAAU,KAAK,GAAG,UAAU,CAAC,MAAM,EAAE,IAAI,OAAO,CAAC,UAAU,EAAE,OAAO,CAAC,CAAC,CAAC;AACvE,SAAS,MAAM;AACf,UAAU,IAAI,MAAM,CAAC,QAAQ,CAAC,gBAAgB,CAAC;AAC/C,cAAY,KAAK,CAAC,IAAI,GAAG,UAAU,GAAC;AACpC;AACA,cAAY,KAAK,CAAC,IAAI,GAAG,MAAM,GAAC;AAChC,SAAS;AACT;AACA,OAAO,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;AAChC,QAAQ,IAAI,MAAM,CAAC,IAAI,EAAE,KAAK,GAAG,EAAE;AACnC,UAAU,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACpC,UAAU,MAAM,CAAC,IAAI,EAAE,CAAC;AACxB,SAAS;AACT,QAAQ,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAChC;AACA,OAAO,MAAM,IAAI,KAAK,KAAK,GAAG,IAAI,KAAK,CAAC,cAAc,EAAE;AACxD,QAAQ,KAAK,CAAC,OAAO,GAAG,IAAI,OAAO,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;AAC9D;AACA,OAAO,MAAM,IAAI,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAC3C,QAAQ,KAAK,CAAC,IAAI,GAAG,SAAS,CAAC;AAC/B,QAAQ,KAAK,CAAC,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACzC;AACA,QAAQ,IAAI,KAAK,KAAK,GAAG,EAAE;AAC3B,UAAU,KAAK,CAAC,WAAW,EAAE,CAAC;AAC9B,SAAS,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;AAClC,UAAU,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;AACjE,SAAS;AACT;AACA,OAAO,MAAM,IAAI,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AAC3C,QAAQ,MAAM,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;AACtC,QAAQ,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAChC,QAAQ,KAAK,CAAC,GAAG,GAAG,KAAK,KAAK,GAAG,CAAC;AAClC;AACA,OAAO,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACnC,QAAQ,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AAClC,QAAQ,KAAK,CAAC,IAAI,GAAG,QAAQ,CAAC;AAC9B;AACA,OAAO,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;AACtC,QAAQ,MAAM,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;AACnC,QAAQ,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,cAAc,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG,SAAS,GAAG,UAAU,IAAI,IAAI,CAAC;AAC9G;AACA,OAAO,MAAM;AACb,QAAQ,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC,cAAc,CAAC;AACzC,OAAO;AACP;AACA,MAAM,OAAO,KAAK,CAAC;AACnB,KAAK,CAAC;AACN;AACA,IAAI,IAAI,WAAW,GAAG,SAAS,MAAM,EAAE,OAAO,EAAE;AAChD,MAAM,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAC9B,MAAM,OAAO,IAAI,KAAK,CAAC,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,OAAO,EAAE,IAAI,CAAC,CAAC;AACpF,KAAK,CAAC;AACN;AACA,IAAI,IAAI,UAAU,GAAG,SAAS,MAAM,EAAE,OAAO,EAAE;AAC/C,MAAM,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAC9B,MAAM,OAAO,IAAI,KAAK,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,OAAO,EAAE,KAAK,CAAC,CAAC;AACrF,KAAK,CAAC;AACN;AACA,IAAI,IAAI,UAAU,GAAG,SAAS,MAAM,EAAE,OAAO,EAAE;AAC/C,MAAM,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAC9B,MAAM,OAAO,IAAI,KAAK,CAAC,UAAU,EAAE,MAAM,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,OAAO,EAAE,KAAK,CAAC,CAAC;AACvF,KAAK,CAAC;AACN;AACA,IAAI,IAAI,eAAe,GAAG,SAAS,MAAM,EAAE,OAAO,EAAE;AACpD,MAAM,IAAI,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;AAClD,MAAM,IAAI,KAAK,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;AAChC;AACA,MAAM,IAAI,KAAK,KAAK,GAAG,EAAE;AACzB,QAAQ,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC,MAAM,CAAC;AACvC,QAAQ,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;AACzB;AACA,OAAO,MAAM;AACb,QAAQ,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;AAChC,QAAQ,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;AAChC,OAAO;AACP;AACA,MAAM,OAAO,KAAK,CAAC;AACnB,KAAK,CAAC;AACN;AACA,IAAI,OAAO;AACX,MAAM,UAAU,EAAE,WAAW;AAC7B,QAAQ,OAAO,IAAI,KAAK,CAAC;AACzB,OAAO;AACP;AACA,MAAM,KAAK,EAAE,SAAS,MAAM,EAAE,KAAK,EAAE;AACrC,QAAQ,KAAK,CAAC,UAAU,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;AAC/C;AACA,QAAQ,IAAI,MAAM,CAAC,QAAQ,EAAE,EAAE;AAC/B,UAAU,OAAO,IAAI,CAAC;AACtB,SAAS;AACT;AACA,QAAQ,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AACrE,QAAQ,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;AACtC,QAAQ,KAAK,CAAC,cAAc,GAAG,KAAK,CAAC,GAAG,CAAC;AACzC;AACA,QAAQ,OAAO,KAAK,CAAC,IAAI,CAAC;AAC1B,OAAO;AACP;AACA,MAAM,SAAS,EAAE,SAAS,KAAK,EAAE;AACjC,QAAQ,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAC5B,OAAO;AACP;AACA,MAAM,MAAM,EAAE,SAAS,KAAK,EAAE,SAAS,EAAE;AACzC,QAAQ,IAAI,CAAC,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,KAAK,IAAI,IAAI,SAAS,IAAI,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC,oBAAoB,CAAC;AAC1H,QAAQ,OAAO,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,IAAI,MAAM,CAAC,UAAU,CAAC;AAC3D,OAAO;AACP;AACA,MAAM,aAAa,EAAE,GAAG;AACxB,KAAK,CAAC;AACN;AACA,GAAG,CAAC,CAAC;AACL;AACA,EAAE,UAAU,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC,CAAC;AAC7D;AACA;;;;"}