{"version":3,"file":"dockerfile.js","sources":["../../../../src/mode/dockerfile/dockerfile.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/dockerfile/dockerfile.js\nimport simple from \"../../addon/mode/simple\"\nexport default function(CodeMirror) {\n  simple(CodeMirror)\n  \"use strict\";\n\n  var from = \"from\";\n  var fromRegex = new RegExp(\"^(\\\\s*)\\\\b(\" + from + \")\\\\b\", \"i\");\n\n  var shells = [\"run\", \"cmd\", \"entrypoint\", \"shell\"];\n  var shellsAsArrayRegex = new RegExp(\"^(\\\\s*)(\" + shells.join('|') + \")(\\\\s+\\\\[)\", \"i\");\n\n  var expose = \"expose\";\n  var exposeRegex = new RegExp(\"^(\\\\s*)(\" + expose + \")(\\\\s+)\", \"i\");\n\n  var others = [\n    \"arg\", \"from\", \"maintainer\", \"label\", \"env\",\n    \"add\", \"copy\", \"volume\", \"user\",\n    \"workdir\", \"onbuild\", \"stopsignal\", \"healthcheck\", \"shell\"\n  ];\n\n  var instructions = [from, expose].concat(shells).concat(others),\n    instructionRegex = \"(\" + instructions.join('|') + \")\",\n    instructionOnlyLine = new RegExp(\"^(\\\\s*)\" + instructionRegex + \"(\\\\s*)(#.*)?$\", \"i\"),\n    instructionWithArguments = new RegExp(\"^(\\\\s*)\" + instructionRegex + \"(\\\\s+)\", \"i\");\n\n  CodeMirror.defineSimpleMode(\"dockerfile\", {\n    start: [\n      {\n        regex: /^\\s*#.*$/,\n        sol: true,\n        token: \"comment\"\n      },\n      {\n        regex: fromRegex,\n        token: [null, \"keyword\"],\n        sol: true,\n        next: \"from\"\n      },\n      {\n        regex: instructionOnlyLine,\n        token: [null, \"keyword\", null, \"error\"],\n        sol: true\n      },\n      {\n        regex: shellsAsArrayRegex,\n        token: [null, \"keyword\", null],\n        sol: true,\n        next: \"array\"\n      },\n      {\n        regex: exposeRegex,\n        token: [null, \"keyword\", null],\n        sol: true,\n        next: \"expose\"\n      },\n      {\n        regex: instructionWithArguments,\n        token: [null, \"keyword\", null],\n        sol: true,\n        next: \"arguments\"\n      },\n      {\n        regex: /./,\n        token: null\n      }\n    ],\n    from: [\n      {\n        regex: /\\s*$/,\n        token: null,\n        next: \"start\"\n      },\n      {\n        regex: /(\\s*)(#.*)$/,\n        token: [null, \"error\"],\n        next: \"start\"\n      },\n      {\n        regex: /(\\s*\\S+\\s+)(as)/i,\n        token: [null, \"keyword\"],\n        next: \"start\"\n      },\n      {\n        token: null,\n        next: \"start\"\n      }\n    ],\n    single: [\n      {\n        regex: /(?:[^\\\\']|\\\\.)/,\n        token: \"string\"\n      },\n      {\n        regex: /'/,\n        token: \"string\",\n        pop: true\n      }\n    ],\n    double: [\n      {\n        regex: /(?:[^\\\\\"]|\\\\.)/,\n        token: \"string\"\n      },\n      {\n        regex: /\"/,\n        token: \"string\",\n        pop: true\n      }\n    ],\n    array: [\n      {\n        regex: /\\]/,\n        token: null,\n        next: \"start\"\n      },\n      {\n        regex: /\"(?:[^\\\\\"]|\\\\.)*\"?/,\n        token: \"string\"\n      }\n    ],\n    expose: [\n      {\n        regex: /\\d+$/,\n        token: \"number\",\n        next: \"start\"\n      },\n      {\n        regex: /[^\\d]+$/,\n        token: null,\n        next: \"start\"\n      },\n      {\n        regex: /\\d+/,\n        token: \"number\"\n      },\n      {\n        regex: /[^\\d]+/,\n        token: null\n      },\n      {\n        token: null,\n        next: \"start\"\n      }\n    ],\n    arguments: [\n      {\n        regex: /^\\s*#.*$/,\n        sol: true,\n        token: \"comment\"\n      },\n      {\n        regex: /\"(?:[^\\\\\"]|\\\\.)*\"?$/,\n        token: \"string\",\n        next: \"start\"\n      },\n      {\n        regex: /\"/,\n        token: \"string\",\n        push: \"double\"\n      },\n      {\n        regex: /'(?:[^\\\\']|\\\\.)*'?$/,\n        token: \"string\",\n        next: \"start\"\n      },\n      {\n        regex: /'/,\n        token: \"string\",\n        push: \"single\"\n      },\n      {\n        regex: /[^#\"']+[\\\\`]$/,\n        token: null\n      },\n      {\n        regex: /[^#\"']+$/,\n        token: null,\n        next: \"start\"\n      },\n      {\n        regex: /[^#\"']+/,\n        token: null\n      },\n      {\n        token: null,\n        next: \"start\"\n      }\n    ],\n    meta: {\n      lineComment: \"#\"\n    }\n  });\n\n  CodeMirror.defineMIME(\"text/x-dockerfile\", \"dockerfile\");\n}"],"names":[],"mappings":";;AAAA;AAEe,oBAAS,UAAU,EAAE;AACpC,EAAE,MAAM,CAAC,UAAU,EAAC;AAEpB;AACA,EAAE,IAAI,IAAI,GAAG,MAAM,CAAC;AACpB,EAAE,IAAI,SAAS,GAAG,IAAI,MAAM,CAAC,aAAa,GAAG,IAAI,GAAG,MAAM,EAAE,GAAG,CAAC,CAAC;AACjE;AACA,EAAE,IAAI,MAAM,GAAG,CAAC,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC;AACrD,EAAE,IAAI,kBAAkB,GAAG,IAAI,MAAM,CAAC,UAAU,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,YAAY,EAAE,GAAG,CAAC,CAAC;AACzF;AACA,EAAE,IAAI,MAAM,GAAG,QAAQ,CAAC;AACxB,EAAE,IAAI,WAAW,GAAG,IAAI,MAAM,CAAC,UAAU,GAAG,MAAM,GAAG,SAAS,EAAE,GAAG,CAAC,CAAC;AACrE;AACA,EAAE,IAAI,MAAM,GAAG;AACf,IAAI,KAAK,EAAE,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,KAAK;AAC/C,IAAI,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM;AACnC,IAAI,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,aAAa,EAAE,OAAO;AAC9D,GAAG,CAAC;AACJ;AACA,EAAE,IAAI,YAAY,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC;AACjE,IAAI,gBAAgB,GAAG,GAAG,GAAG,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG;AACzD,IAAI,mBAAmB,GAAG,IAAI,MAAM,CAAC,SAAS,GAAG,gBAAgB,GAAG,eAAe,EAAE,GAAG,CAAC;AACzF,IAAI,wBAAwB,GAAG,IAAI,MAAM,CAAC,SAAS,GAAG,gBAAgB,GAAG,QAAQ,EAAE,GAAG,CAAC,CAAC;AACxF;AACA,EAAE,UAAU,CAAC,gBAAgB,CAAC,YAAY,EAAE;AAC5C,IAAI,KAAK,EAAE;AACX,MAAM;AACN,QAAQ,KAAK,EAAE,UAAU;AACzB,QAAQ,GAAG,EAAE,IAAI;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,SAAS;AACxB,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,CAAC;AAChC,QAAQ,GAAG,EAAE,IAAI;AACjB,QAAQ,IAAI,EAAE,MAAM;AACpB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,mBAAmB;AAClC,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,CAAC;AAC/C,QAAQ,GAAG,EAAE,IAAI;AACjB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,kBAAkB;AACjC,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC;AACtC,QAAQ,GAAG,EAAE,IAAI;AACjB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,WAAW;AAC1B,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC;AACtC,QAAQ,GAAG,EAAE,IAAI;AACjB,QAAQ,IAAI,EAAE,QAAQ;AACtB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,wBAAwB;AACvC,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC;AACtC,QAAQ,GAAG,EAAE,IAAI;AACjB,QAAQ,IAAI,EAAE,WAAW;AACzB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,GAAG;AAClB,QAAQ,KAAK,EAAE,IAAI;AACnB,OAAO;AACP,KAAK;AACL,IAAI,IAAI,EAAE;AACV,MAAM;AACN,QAAQ,KAAK,EAAE,MAAM;AACrB,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,aAAa;AAC5B,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,OAAO,CAAC;AAC9B,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,kBAAkB;AACjC,QAAQ,KAAK,EAAE,CAAC,IAAI,EAAE,SAAS,CAAC;AAChC,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM;AACN,QAAQ,KAAK,EAAE,gBAAgB;AAC/B,QAAQ,KAAK,EAAE,QAAQ;AACvB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,GAAG;AAClB,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,GAAG,EAAE,IAAI;AACjB,OAAO;AACP,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM;AACN,QAAQ,KAAK,EAAE,gBAAgB;AAC/B,QAAQ,KAAK,EAAE,QAAQ;AACvB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,GAAG;AAClB,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,GAAG,EAAE,IAAI;AACjB,OAAO;AACP,KAAK;AACL,IAAI,KAAK,EAAE;AACX,MAAM;AACN,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,oBAAoB;AACnC,QAAQ,KAAK,EAAE,QAAQ;AACvB,OAAO;AACP,KAAK;AACL,IAAI,MAAM,EAAE;AACZ,MAAM;AACN,QAAQ,KAAK,EAAE,MAAM;AACrB,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,SAAS;AACxB,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,QAAQ;AACvB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,KAAK,EAAE,IAAI;AACnB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,KAAK;AACL,IAAI,SAAS,EAAE;AACf,MAAM;AACN,QAAQ,KAAK,EAAE,UAAU;AACzB,QAAQ,GAAG,EAAE,IAAI;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,qBAAqB;AACpC,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,GAAG;AAClB,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,IAAI,EAAE,QAAQ;AACtB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,qBAAqB;AACpC,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,GAAG;AAClB,QAAQ,KAAK,EAAE,QAAQ;AACvB,QAAQ,IAAI,EAAE,QAAQ;AACtB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,eAAe;AAC9B,QAAQ,KAAK,EAAE,IAAI;AACnB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,UAAU;AACzB,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,SAAS;AACxB,QAAQ,KAAK,EAAE,IAAI;AACnB,OAAO;AACP,MAAM;AACN,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,OAAO;AACrB,OAAO;AACP,KAAK;AACL,IAAI,IAAI,EAAE;AACV,MAAM,WAAW,EAAE,GAAG;AACtB,KAAK;AACL,GAAG,CAAC,CAAC;AACL;AACA,EAAE,UAAU,CAAC,UAAU,CAAC,mBAAmB,EAAE,YAAY,CAAC,CAAC;AAC3D;;;;"}