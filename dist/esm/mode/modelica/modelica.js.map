{"version":3,"file":"modelica.js","sources":["../../../../src/mode/modelica/modelica.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/modelica/modelica.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"modelica\", function(config, parserConfig) {\n\n    var indentUnit = config.indentUnit;\n    var keywords = parserConfig.keywords || {};\n    var builtin = parserConfig.builtin || {};\n    var atoms = parserConfig.atoms || {};\n\n    var isSingleOperatorChar = /[;=\\(:\\),{}.*<>+\\-\\/^\\[\\]]/;\n    var isDoubleOperatorChar = /(:=|<=|>=|==|<>|\\.\\+|\\.\\-|\\.\\*|\\.\\/|\\.\\^)/;\n    var isDigit = /[0-9]/;\n    var isNonDigit = /[_a-zA-Z]/;\n\n    function tokenLineComment(stream, state) {\n      stream.skipToEnd();\n      state.tokenize = null;\n      return \"comment\";\n    }\n\n    function tokenBlockComment(stream, state) {\n      var maybeEnd = false, ch;\n      while (ch = stream.next()) {\n        if (maybeEnd && ch == \"/\") {\n          state.tokenize = null;\n          break;\n        }\n        maybeEnd = (ch == \"*\");\n      }\n      return \"comment\";\n    }\n\n    function tokenString(stream, state) {\n      var escaped = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (ch == '\"' && !escaped) {\n          state.tokenize = null;\n          state.sol = false;\n          break;\n        }\n        escaped = !escaped && ch == \"\\\\\";\n      }\n\n      return \"string\";\n    }\n\n    function tokenIdent(stream, state) {\n      stream.eatWhile(isDigit);\n      while (stream.eat(isDigit) || stream.eat(isNonDigit)) { }\n\n\n      var cur = stream.current();\n\n      if(state.sol && (cur == \"package\" || cur == \"model\" || cur == \"when\" || cur == \"connector\")) state.level++;\n      else if(state.sol && cur == \"end\" && state.level > 0) state.level--;\n\n      state.tokenize = null;\n      state.sol = false;\n\n      if (keywords.propertyIsEnumerable(cur)) return \"keyword\";\n      else if (builtin.propertyIsEnumerable(cur)) return \"builtin\";\n      else if (atoms.propertyIsEnumerable(cur)) return \"atom\";\n      else return \"variable\";\n    }\n\n    function tokenQIdent(stream, state) {\n      while (stream.eat(/[^']/)) { }\n\n      state.tokenize = null;\n      state.sol = false;\n\n      if(stream.eat(\"'\"))\n        return \"variable\";\n      else\n        return \"error\";\n    }\n\n    function tokenUnsignedNuber(stream, state) {\n      stream.eatWhile(isDigit);\n      if (stream.eat('.')) {\n        stream.eatWhile(isDigit);\n      }\n      if (stream.eat('e') || stream.eat('E')) {\n        if (!stream.eat('-'))\n          stream.eat('+');\n        stream.eatWhile(isDigit);\n      }\n\n      state.tokenize = null;\n      state.sol = false;\n      return \"number\";\n    }\n\n    return {\n      startState: function() {\n        return {\n          tokenize: null,\n          level: 0,\n          sol: true\n        };\n      },\n\n      token: function(stream, state) {\n        if(state.tokenize != null) {\n          return state.tokenize(stream, state);\n        }\n\n        if(stream.sol()) {\n          state.sol = true;\n        }\n\n        if(stream.eatSpace()) {\n          state.tokenize = null;\n          return null;\n        }\n\n        var ch = stream.next();\n\n        if(ch == '/' && stream.eat('/')) {\n          state.tokenize = tokenLineComment;\n        }\n        else if(ch == '/' && stream.eat('*')) {\n          state.tokenize = tokenBlockComment;\n        }\n        else if(isDoubleOperatorChar.test(ch+stream.peek())) {\n          stream.next();\n          state.tokenize = null;\n          return \"operator\";\n        }\n        else if(isSingleOperatorChar.test(ch)) {\n          state.tokenize = null;\n          return \"operator\";\n        }\n        else if(isNonDigit.test(ch)) {\n          state.tokenize = tokenIdent;\n        }\n        else if(ch == \"'\" && stream.peek() && stream.peek() != \"'\") {\n          state.tokenize = tokenQIdent;\n        }\n        else if(ch == '\"') {\n          state.tokenize = tokenString;\n        }\n        else if(isDigit.test(ch)) {\n          state.tokenize = tokenUnsignedNuber;\n        }\n        else {\n          state.tokenize = null;\n          return \"error\";\n        }\n\n        return state.tokenize(stream, state);\n      },\n\n      indent: function(state, textAfter) {\n        if (state.tokenize != null) return CodeMirror.Pass;\n\n        var level = state.level;\n        if(/(algorithm)/.test(textAfter)) level--;\n        if(/(equation)/.test(textAfter)) level--;\n        if(/(initial algorithm)/.test(textAfter)) level--;\n        if(/(initial equation)/.test(textAfter)) level--;\n        if(/(end)/.test(textAfter)) level--;\n\n        if(level > 0)\n          return indentUnit*level;\n        else\n          return 0;\n      },\n\n      blockCommentStart: \"/*\",\n      blockCommentEnd: \"*/\",\n      lineComment: \"//\"\n    };\n  });\n\n  function words(str) {\n    var obj = {}, words = str.split(\" \");\n    for (var i=0; i<words.length; ++i)\n      obj[words[i]] = true;\n    return obj;\n  }\n\n  var modelicaKeywords = \"algorithm and annotation assert block break class connect connector constant constrainedby der discrete each else elseif elsewhen encapsulated end enumeration equation expandable extends external false final flow for function if import impure in initial inner input loop model not operator or outer output package parameter partial protected public pure record redeclare replaceable return stream then true type when while within\";\n  var modelicaBuiltin = \"abs acos actualStream asin atan atan2 cardinality ceil cos cosh delay div edge exp floor getInstanceName homotopy inStream integer log log10 mod pre reinit rem semiLinear sign sin sinh spatialDistribution sqrt tan tanh\";\n  var modelicaAtoms = \"Real Boolean Integer String\";\n\n  function def(mimes, mode) {\n    if (typeof mimes == \"string\")\n      mimes = [mimes];\n\n    var words = [];\n\n    function add(obj) {\n      if (obj)\n        for (var prop in obj)\n          if (obj.hasOwnProperty(prop))\n            words.push(prop);\n    }\n\n    add(mode.keywords);\n    add(mode.builtin);\n    add(mode.atoms);\n\n    if (words.length) {\n      mode.helperType = mimes[0];\n      CodeMirror.registerHelper(\"hintWords\", mimes[0], words);\n    }\n\n    for (var i=0; i<mimes.length; ++i)\n      CodeMirror.defineMIME(mimes[i], mode);\n  }\n\n  def([\"text/x-modelica\"], {\n    name: \"modelica\",\n    keywords: words(modelicaKeywords),\n    builtin: words(modelicaBuiltin),\n    atoms: words(modelicaAtoms)\n  });\n}"],"names":[],"mappings":"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"}