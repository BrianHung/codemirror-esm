{"version":3,"file":"gfm.js","sources":["../../../../src/mode/gfm/gfm.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/gfm/gfm.js\nimport markdown from \"../markdown/markdown\"\nimport overlay from \"../../addon/mode/overlay\"\nexport default function(CodeMirror) {\n  markdown(CodeMirror)\n  overlay(CodeMirror)\n  \"use strict\";\n\n  var urlRE = /^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\\.beep|\\.lwz|\\.xpc|\\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\\.beeps?|xmpp|xri|ymsgr|z39\\.50[rs]?):(?:\\/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]|\\([^\\s()<>]*\\))+(?:\\([^\\s()<>]*\\)|[^\\s`*!()\\[\\]{};:'\".,<>?«»“”‘’]))/i\n\n  CodeMirror.defineMode(\"gfm\", function(config, modeConfig) {\n    var codeDepth = 0;\n    function blankLine(state) {\n      state.code = false;\n      return null;\n    }\n    var gfmOverlay = {\n      startState: function() {\n        return {\n          code: false,\n          codeBlock: false,\n          ateSpace: false\n        };\n      },\n      copyState: function(s) {\n        return {\n          code: s.code,\n          codeBlock: s.codeBlock,\n          ateSpace: s.ateSpace\n        };\n      },\n      token: function(stream, state) {\n        state.combineTokens = null;\n\n        if (state.codeBlock) {\n          if (stream.match(/^```+/)) {\n            state.codeBlock = false;\n            return null;\n          }\n          stream.skipToEnd();\n          return null;\n        }\n        if (stream.sol()) {\n          state.code = false;\n        }\n        if (stream.sol() && stream.match(/^```+/)) {\n          stream.skipToEnd();\n          state.codeBlock = true;\n          return null;\n        }\n        if (stream.peek() === '`') {\n          stream.next();\n          var before = stream.pos;\n          stream.eatWhile('`');\n          var difference = 1 + stream.pos - before;\n          if (!state.code) {\n            codeDepth = difference;\n            state.code = true;\n          } else {\n            if (difference === codeDepth) { \n              state.code = false;\n            }\n          }\n          return null;\n        } else if (state.code) {\n          stream.next();\n          return null;\n        }\n        if (stream.eatSpace()) {\n          state.ateSpace = true;\n          return null;\n        }\n        if (stream.sol() || state.ateSpace) {\n          state.ateSpace = false;\n          if (modeConfig.gitHubSpice !== false) {\n            if(stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+@)?(?=.{0,6}\\d)(?:[a-f0-9]{7,40}\\b)/)) {\n              state.combineTokens = true;\n              return \"link\";\n            } else if (stream.match(/^(?:[a-zA-Z0-9\\-_]+\\/)?(?:[a-zA-Z0-9\\-_]+)?#[0-9]+\\b/)) {\n              state.combineTokens = true;\n              return \"link\";\n            }\n          }\n        }\n        if (stream.match(urlRE) &&\n          stream.string.slice(stream.start - 2, stream.start) != \"](\" &&\n          (stream.start == 0 || /\\W/.test(stream.string.charAt(stream.start - 1)))) {\n          state.combineTokens = true;\n          return \"link\";\n        }\n        stream.next();\n        return null;\n      },\n      blankLine: blankLine\n    };\n\n    var markdownConfig = {\n      taskLists: true,\n      strikethrough: true,\n      emoji: true\n    };\n    for (var attr in modeConfig) {\n      markdownConfig[attr] = modeConfig[attr];\n    }\n    markdownConfig.name = \"markdown\";\n    return CodeMirror.overlayMode(CodeMirror.getMode(config, markdownConfig), gfmOverlay);\n\n  }, \"markdown\");\n\n  CodeMirror.defineMIME(\"text/x-gfm\", \"gfm\");\n}"],"names":[],"mappings":"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"}