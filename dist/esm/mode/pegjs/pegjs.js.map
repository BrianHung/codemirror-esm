{"version":3,"file":"pegjs.js","sources":["../../../../src/mode/pegjs/pegjs.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/pegjs/pegjs.js\nimport javascript from \"../javascript/javascript\"\nexport default function(CodeMirror) {\n  javascript(CodeMirror)\n  \"use strict\";\n\n  CodeMirror.defineMode(\"pegjs\", function (config) {\n    var jsMode = CodeMirror.getMode(config, \"javascript\");\n\n    function identifier(stream) {\n      return stream.match(/^[a-zA-Z_][a-zA-Z0-9_]*/);\n    }\n\n    return {\n      startState: function () {\n        return {\n          inString: false,\n          stringType: null,\n          inComment: false,\n          inCharacterClass: false,\n          braced: 0,\n          lhs: true,\n          localState: null\n        };\n      },\n      token: function (stream, state) {\n        if (stream)\n\n          if (!state.inString && !state.inComment && ((stream.peek() == '\"') || (stream.peek() == \"'\"))) {\n            state.stringType = stream.peek();\n            stream.next(); \n            state.inString = true; \n          }\n        if (!state.inString && !state.inComment && stream.match(/^\\/\\*/)) {\n          state.inComment = true;\n        }\n\n        if (state.inString) {\n          while (state.inString && !stream.eol()) {\n            if (stream.peek() === state.stringType) {\n              stream.next(); \n              state.inString = false; \n            } else if (stream.peek() === '\\\\') {\n              stream.next();\n              stream.next();\n            } else {\n              stream.match(/^.[^\\\\\\\"\\']*/);\n            }\n          }\n          return state.lhs ? \"property string\" : \"string\"; \n        } else if (state.inComment) {\n          while (state.inComment && !stream.eol()) {\n            if (stream.match(/\\*\\//)) {\n              state.inComment = false; \n            } else {\n              stream.match(/^.[^\\*]*/);\n            }\n          }\n          return \"comment\";\n        } else if (state.inCharacterClass) {\n          while (state.inCharacterClass && !stream.eol()) {\n            if (!(stream.match(/^[^\\]\\\\]+/) || stream.match(/^\\\\./))) {\n              state.inCharacterClass = false;\n            }\n          }\n        } else if (stream.peek() === '[') {\n          stream.next();\n          state.inCharacterClass = true;\n          return 'bracket';\n        } else if (stream.match(/^\\/\\//)) {\n          stream.skipToEnd();\n          return \"comment\";\n        } else if (state.braced || stream.peek() === '{') {\n          if (state.localState === null) {\n            state.localState = CodeMirror.startState(jsMode);\n          }\n          var token = jsMode.token(stream, state.localState);\n          var text = stream.current();\n          if (!token) {\n            for (var i = 0; i < text.length; i++) {\n              if (text[i] === '{') {\n                state.braced++;\n              } else if (text[i] === '}') {\n                state.braced--;\n              }\n            };\n          }\n          return token;\n        } else if (identifier(stream)) {\n          if (stream.peek() === ':') {\n            return 'variable';\n          }\n          return 'variable-2';\n        } else if (['[', ']', '(', ')'].indexOf(stream.peek()) != -1) {\n          stream.next();\n          return 'bracket';\n        } else if (!stream.eatSpace()) {\n          stream.next();\n        }\n        return null;\n      }\n    };\n  }, \"javascript\");\n\n}"],"names":[],"mappings":"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"}