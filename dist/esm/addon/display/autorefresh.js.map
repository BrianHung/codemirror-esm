{"version":3,"file":"autorefresh.js","sources":["../../../../src/addon/display/autorefresh.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/display/autorefresh.js\nexport default function(CodeMirror) {\n  \"use strict\"\n\n  CodeMirror.defineOption(\"autoRefresh\", false, function(cm, val) {\n    if (cm.state.autoRefresh) {\n      stopListening(cm, cm.state.autoRefresh)\n      cm.state.autoRefresh = null\n    }\n    if (val && cm.display.wrapper.offsetHeight == 0)\n      startListening(cm, cm.state.autoRefresh = {delay: val.delay || 250})\n  })\n\n  function startListening(cm, state) {\n    function check() {\n      if (cm.display.wrapper.offsetHeight) {\n        stopListening(cm, state)\n        if (cm.display.lastWrapHeight != cm.display.wrapper.clientHeight)\n          cm.refresh()\n      } else {\n        state.timeout = setTimeout(check, state.delay)\n      }\n    }\n    state.timeout = setTimeout(check, state.delay)\n    state.hurry = function() {\n      clearTimeout(state.timeout)\n      state.timeout = setTimeout(check, 50)\n    }\n    CodeMirror.on(window, \"mouseup\", state.hurry)\n    CodeMirror.on(window, \"keyup\", state.hurry)\n  }\n\n  function stopListening(_cm, state) {\n    clearTimeout(state.timeout)\n    CodeMirror.off(window, \"mouseup\", state.hurry)\n    CodeMirror.off(window, \"keyup\", state.hurry)\n  }\n}"],"names":[],"mappings":"AAAA;AACe,qBAAS,UAAU,EAAE;AAEpC;AACA,EAAE,UAAU,CAAC,YAAY,CAAC,aAAa,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE;AAClE,IAAI,IAAI,EAAE,CAAC,KAAK,CAAC,WAAW,EAAE;AAC9B,MAAM,aAAa,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,CAAC,WAAW,EAAC;AAC7C,MAAM,EAAE,CAAC,KAAK,CAAC,WAAW,GAAG,KAAI;AACjC,KAAK;AACL,IAAI,IAAI,GAAG,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,IAAI,CAAC;AACnD,QAAM,cAAc,CAAC,EAAE,EAAE,EAAE,CAAC,KAAK,CAAC,WAAW,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,IAAC;AAC1E,GAAG,EAAC;AACJ;AACA,EAAE,SAAS,cAAc,CAAC,EAAE,EAAE,KAAK,EAAE;AACrC,IAAI,SAAS,KAAK,GAAG;AACrB,MAAM,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY,EAAE;AAC3C,QAAQ,aAAa,CAAC,EAAE,EAAE,KAAK,EAAC;AAChC,QAAQ,IAAI,EAAE,CAAC,OAAO,CAAC,cAAc,IAAI,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,YAAY;AACxE,YAAU,EAAE,CAAC,OAAO,KAAE;AACtB,OAAO,MAAM;AACb,QAAQ,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAC;AACtD,OAAO;AACP,KAAK;AACL,IAAI,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,EAAC;AAClD,IAAI,KAAK,CAAC,KAAK,GAAG,WAAW;AAC7B,MAAM,YAAY,CAAC,KAAK,CAAC,OAAO,EAAC;AACjC,MAAM,KAAK,CAAC,OAAO,GAAG,UAAU,CAAC,KAAK,EAAE,EAAE,EAAC;AAC3C,MAAK;AACL,IAAI,UAAU,CAAC,EAAE,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,KAAK,EAAC;AACjD,IAAI,UAAU,CAAC,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,CAAC,KAAK,EAAC;AAC/C,GAAG;AACH;AACA,EAAE,SAAS,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE;AACrC,IAAI,YAAY,CAAC,KAAK,CAAC,OAAO,EAAC;AAC/B,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,KAAK,EAAC;AAClD,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,CAAC,KAAK,EAAC;AAChD,GAAG;AACH;;;;"}