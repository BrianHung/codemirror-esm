{"version":3,"file":"loadmode.js","sources":["../../../../src/addon/mode/loadmode.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/mode/loadmode.js\nexport default function(CodeMirror, env) {\n  if (!CodeMirror.modeURL) CodeMirror.modeURL = \"../mode/%N/%N.js\";\n\n  var loading = {};\n  function splitCallback(cont, n) {\n    var countDown = n;\n    return function() { if (--countDown == 0) cont(); };\n  }\n  function ensureDeps(mode, cont, options) {\n    var modeObj = CodeMirror.modes[mode], deps = modeObj && modeObj.dependencies;\n    if (!deps) return cont();\n    var missing = [];\n    for (var i = 0; i < deps.length; ++i) {\n      if (!CodeMirror.modes.hasOwnProperty(deps[i]))\n        missing.push(deps[i]);\n    }\n    if (!missing.length) return cont();\n    var split = splitCallback(cont, missing.length);\n    for (var i = 0; i < missing.length; ++i)\n      CodeMirror.requireMode(missing[i], split, options);\n  }\n\n  CodeMirror.requireMode = function(mode, cont, options) {\n    if (typeof mode != \"string\") mode = mode.name;\n    if (CodeMirror.modes.hasOwnProperty(mode)) return ensureDeps(mode, cont, options);\n    if (loading.hasOwnProperty(mode)) return loading[mode].push(cont);\n\n    var file = options && options.path ? options.path(mode) : CodeMirror.modeURL.replace(/%N/g, mode);\n    if (options && options.loadMode) {\n      options.loadMode(file, function() { ensureDeps(mode, cont, options) })\n    } else if (env == \"plain\") {\n      var script = document.createElement(\"script\");\n      script.src = file;\n      var others = document.getElementsByTagName(\"script\")[0];\n      var list = loading[mode] = [cont];\n      CodeMirror.on(script, \"load\", function() {\n        ensureDeps(mode, function() {\n          for (var i = 0; i < list.length; ++i) list[i]();\n        }, options);\n      });\n      others.parentNode.insertBefore(script, others);\n    } else if (env == \"cjs\") {\n      require(file);\n      cont();\n    } else if (env == \"amd\") {\n      requirejs([file], cont);\n    }\n  };\n\n  CodeMirror.autoLoadMode = function(instance, mode, options) {\n    if (!CodeMirror.modes.hasOwnProperty(mode))\n      CodeMirror.requireMode(mode, function() {\n        instance.setOption(\"mode\", instance.getOption(\"mode\"));\n      }, options);\n  };\n}"],"names":[],"mappings":"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"}