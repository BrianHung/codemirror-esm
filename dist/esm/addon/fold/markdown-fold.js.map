{"version":3,"file":"markdown-fold.js","sources":["../../../../src/addon/fold/markdown-fold.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/fold/markdown-fold.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.registerHelper(\"fold\", \"markdown\", function(cm, start) {\n    var maxDepth = 100;\n\n    function isHeader(lineNo) {\n      var tokentype = cm.getTokenTypeAt(CodeMirror.Pos(lineNo, 0));\n      return tokentype && /\\bheader\\b/.test(tokentype);\n    }\n\n    function headerLevel(lineNo, line, nextLine) {\n      var match = line && line.match(/^#+/);\n      if (match && isHeader(lineNo)) return match[0].length;\n      match = nextLine && nextLine.match(/^[=\\-]+\\s*$/);\n      if (match && isHeader(lineNo + 1)) return nextLine[0] == \"=\" ? 1 : 2;\n      return maxDepth;\n    }\n\n    var firstLine = cm.getLine(start.line), nextLine = cm.getLine(start.line + 1);\n    var level = headerLevel(start.line, firstLine, nextLine);\n    if (level === maxDepth) return undefined;\n\n    var lastLineNo = cm.lastLine();\n    var end = start.line, nextNextLine = cm.getLine(end + 2);\n    while (end < lastLineNo) {\n      if (headerLevel(end + 1, nextLine, nextNextLine) <= level) break;\n      ++end;\n      nextLine = nextNextLine;\n      nextNextLine = cm.getLine(end + 2);\n    }\n\n    return {\n      from: CodeMirror.Pos(start.line, firstLine.length),\n      to: CodeMirror.Pos(end, cm.getLine(end).length)\n    };\n  });\n\n}"],"names":[],"mappings":"AAAA;AACe,sBAAS,UAAU,EAAE;AAEpC;AACA,EAAE,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,EAAE,KAAK,EAAE;AACpE,IAAI,IAAI,QAAQ,GAAG,GAAG,CAAC;AACvB;AACA,IAAI,SAAS,QAAQ,CAAC,MAAM,EAAE;AAC9B,MAAM,IAAI,SAAS,GAAG,EAAE,CAAC,cAAc,CAAC,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;AACnE,MAAM,OAAO,SAAS,IAAI,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACvD,KAAK;AACL;AACA,IAAI,SAAS,WAAW,CAAC,MAAM,EAAE,IAAI,EAAE,QAAQ,EAAE;AACjD,MAAM,IAAI,KAAK,GAAG,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;AAC5C,MAAM,IAAI,KAAK,IAAI,QAAQ,CAAC,MAAM,CAAC,IAAE,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAC;AAC5D,MAAM,KAAK,GAAG,QAAQ,IAAI,QAAQ,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;AACxD,MAAM,IAAI,KAAK,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,IAAE,OAAO,QAAQ,CAAC,CAAC,CAAC,IAAI,GAAG,GAAG,CAAC,GAAG,CAAC,GAAC;AAC3E,MAAM,OAAO,QAAQ,CAAC;AACtB,KAAK;AACL;AACA,IAAI,IAAI,SAAS,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;AAClF,IAAI,IAAI,KAAK,GAAG,WAAW,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,EAAE,QAAQ,CAAC,CAAC;AAC7D,IAAI,IAAI,KAAK,KAAK,QAAQ,IAAE,OAAO,SAAS,GAAC;AAC7C;AACA,IAAI,IAAI,UAAU,GAAG,EAAE,CAAC,QAAQ,EAAE,CAAC;AACnC,IAAI,IAAI,GAAG,GAAG,KAAK,CAAC,IAAI,EAAE,YAAY,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AAC7D,IAAI,OAAO,GAAG,GAAG,UAAU,EAAE;AAC7B,MAAM,IAAI,WAAW,CAAC,GAAG,GAAG,CAAC,EAAE,QAAQ,EAAE,YAAY,CAAC,IAAI,KAAK,IAAE,QAAM;AACvE,MAAM,EAAE,GAAG,CAAC;AACZ,MAAM,QAAQ,GAAG,YAAY,CAAC;AAC9B,MAAM,YAAY,GAAG,EAAE,CAAC,OAAO,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC;AACzC,KAAK;AACL;AACA,IAAI,OAAO;AACX,MAAM,IAAI,EAAE,UAAU,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE,SAAS,CAAC,MAAM,CAAC;AACxD,MAAM,EAAE,EAAE,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;AACrD,KAAK,CAAC;AACN,GAAG,CAAC,CAAC;AACL;AACA;;;;"}