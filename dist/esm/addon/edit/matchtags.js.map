{"version":3,"file":"matchtags.js","sources":["../../../../src/addon/edit/matchtags.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/edit/matchtags.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"matchTags\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"cursorActivity\", doMatchTags);\n      cm.off(\"viewportChange\", maybeUpdateMatch);\n      clear(cm);\n    }\n    if (val) {\n      cm.state.matchBothTags = typeof val == \"object\" && val.bothTags;\n      cm.on(\"cursorActivity\", doMatchTags);\n      cm.on(\"viewportChange\", maybeUpdateMatch);\n      doMatchTags(cm);\n    }\n  });\n\n  function clear(cm) {\n    if (cm.state.tagHit) cm.state.tagHit.clear();\n    if (cm.state.tagOther) cm.state.tagOther.clear();\n    cm.state.tagHit = cm.state.tagOther = null;\n  }\n\n  function doMatchTags(cm) {\n    cm.state.failedTagMatch = false;\n    cm.operation(function() {\n      clear(cm);\n      if (cm.somethingSelected()) return;\n      var cur = cm.getCursor(), range = cm.getViewport();\n      range.from = Math.min(range.from, cur.line); range.to = Math.max(cur.line + 1, range.to);\n      var match = CodeMirror.findMatchingTag(cm, cur, range);\n      if (!match) return;\n      if (cm.state.matchBothTags) {\n        var hit = match.at == \"open\" ? match.open : match.close;\n        if (hit) cm.state.tagHit = cm.markText(hit.from, hit.to, {className: \"CodeMirror-matchingtag\"});\n      }\n      var other = match.at == \"close\" ? match.open : match.close;\n      if (other)\n        cm.state.tagOther = cm.markText(other.from, other.to, {className: \"CodeMirror-matchingtag\"});\n      else\n        cm.state.failedTagMatch = true;\n    });\n  }\n\n  function maybeUpdateMatch(cm) {\n    if (cm.state.failedTagMatch) doMatchTags(cm);\n  }\n\n  CodeMirror.commands.toMatchingTag = function(cm) {\n    var found = CodeMirror.findMatchingTag(cm, cm.getCursor());\n    if (found) {\n      var other = found.at == \"close\" ? found.open : found.close;\n      if (other) cm.extendSelection(other.to, other.from);\n    }\n  };\n}"],"names":[],"mappings":"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"}