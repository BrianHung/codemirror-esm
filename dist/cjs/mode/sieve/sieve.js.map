{"version":3,"file":"sieve.js","sources":["../../../../src/mode/sieve/sieve.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/sieve/sieve.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"sieve\", function(config) {\n    function words(str) {\n      var obj = {}, words = str.split(\" \");\n      for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n      return obj;\n    }\n\n    var keywords = words(\"if elsif else stop require\");\n    var atoms = words(\"true false not\");\n    var indentUnit = config.indentUnit;\n\n    function tokenBase(stream, state) {\n\n      var ch = stream.next();\n      if (ch == \"/\" && stream.eat(\"*\")) {\n        state.tokenize = tokenCComment;\n        return tokenCComment(stream, state);\n      }\n\n      if (ch === '#') {\n        stream.skipToEnd();\n        return \"comment\";\n      }\n\n      if (ch == \"\\\"\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      }\n\n      if (ch == \"(\") {\n        state._indent.push(\"(\");\n        state._indent.push(\"{\");\n        return null;\n      }\n\n      if (ch === \"{\") {\n        state._indent.push(\"{\");\n        return null;\n      }\n\n      if (ch == \")\")  {\n        state._indent.pop();\n        state._indent.pop();\n      }\n\n      if (ch === \"}\") {\n        state._indent.pop();\n        return null;\n      }\n\n      if (ch == \",\")\n        return null;\n\n      if (ch == \";\")\n        return null;\n\n\n      if (/[{}\\(\\),;]/.test(ch))\n        return null;\n\n      if (/\\d/.test(ch)) {\n        stream.eatWhile(/[\\d]/);\n        stream.eat(/[KkMmGg]/);\n        return \"number\";\n      }\n\n      if (ch == \":\") {\n        stream.eatWhile(/[a-zA-Z_]/);\n        stream.eatWhile(/[a-zA-Z0-9_]/);\n\n        return \"operator\";\n      }\n\n      stream.eatWhile(/\\w/);\n      var cur = stream.current();\n\n      if ((cur == \"text\") && stream.eat(\":\"))\n      {\n        state.tokenize = tokenMultiLineString;\n        return \"string\";\n      }\n\n      if (keywords.propertyIsEnumerable(cur))\n        return \"keyword\";\n\n      if (atoms.propertyIsEnumerable(cur))\n        return \"atom\";\n\n      return null;\n    }\n\n    function tokenMultiLineString(stream, state)\n    {\n      state._multiLineString = true;\n      if (!stream.sol()) {\n        stream.eatSpace();\n\n        if (stream.peek() == \"#\") {\n          stream.skipToEnd();\n          return \"comment\";\n        }\n\n        stream.skipToEnd();\n        return \"string\";\n      }\n\n      if ((stream.next() == \".\")  && (stream.eol()))\n      {\n        state._multiLineString = false;\n        state.tokenize = tokenBase;\n      }\n\n      return \"string\";\n    }\n\n    function tokenCComment(stream, state) {\n      var maybeEnd = false, ch;\n      while ((ch = stream.next()) != null) {\n        if (maybeEnd && ch == \"/\") {\n          state.tokenize = tokenBase;\n          break;\n        }\n        maybeEnd = (ch == \"*\");\n      }\n      return \"comment\";\n    }\n\n    function tokenString(quote) {\n      return function(stream, state) {\n        var escaped = false, ch;\n        while ((ch = stream.next()) != null) {\n          if (ch == quote && !escaped)\n            break;\n          escaped = !escaped && ch == \"\\\\\";\n        }\n        if (!escaped) state.tokenize = tokenBase;\n        return \"string\";\n      };\n    }\n\n    return {\n      startState: function(base) {\n        return {tokenize: tokenBase,\n          baseIndent: base || 0,\n          _indent: []};\n      },\n\n      token: function(stream, state) {\n        if (stream.eatSpace())\n          return null;\n\n        return (state.tokenize || tokenBase)(stream, state);\n      },\n\n      indent: function(state, _textAfter) {\n        var length = state._indent.length;\n        if (_textAfter && (_textAfter[0] == \"}\"))\n          length--;\n\n        if (length <0)\n          length = 0;\n\n        return length * indentUnit;\n      },\n\n      electricChars: \"}\"\n    };\n  });\n\n  CodeMirror.defineMIME(\"application/sieve\", \"sieve\");\n\n}"],"names":[],"mappings":"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"}