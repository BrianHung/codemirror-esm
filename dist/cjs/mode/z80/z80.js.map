{"version":3,"file":"z80.js","sources":["../../../../src/mode/z80/z80.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/mode/z80/z80.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode('z80', function(_config, parserConfig) {\n    var ez80 = parserConfig.ez80;\n    var keywords1, keywords2;\n    if (ez80) {\n      keywords1 = /^(exx?|(ld|cp)([di]r?)?|[lp]ea|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|[de]i|halt|im|in([di]mr?|ir?|irx|2r?)|ot(dmr?|[id]rx|imr?)|out(0?|[di]r?|[di]2r?)|tst(io)?|slp)(\\.([sl]?i)?[sl])?\\b/i;\n      keywords2 = /^(((call|j[pr]|rst|ret[in]?)(\\.([sl]?i)?[sl])?)|(rs|st)mix)\\b/i;\n    } else {\n      keywords1 = /^(exx?|(ld|cp|in)([di]r?)?|pop|push|ad[cd]|cpl|daa|dec|inc|neg|sbc|sub|and|bit|[cs]cf|x?or|res|set|r[lr]c?a?|r[lr]d|s[lr]a|srl|djnz|nop|rst|[de]i|halt|im|ot[di]r|out[di]?)\\b/i;\n      keywords2 = /^(call|j[pr]|ret[in]?|b_?(call|jump))\\b/i;\n    }\n\n    var variables1 = /^(af?|bc?|c|de?|e|hl?|l|i[xy]?|r|sp)\\b/i;\n    var variables2 = /^(n?[zc]|p[oe]?|m)\\b/i;\n    var errors = /^([hl][xy]|i[xy][hl]|slia|sll)\\b/i;\n    var numbers = /^([\\da-f]+h|[0-7]+o|[01]+b|\\d+d?)\\b/i;\n\n    return {\n      startState: function() {\n        return {\n          context: 0\n        };\n      },\n      token: function(stream, state) {\n        if (!stream.column())\n          state.context = 0;\n\n        if (stream.eatSpace())\n          return null;\n\n        var w;\n\n        if (stream.eatWhile(/\\w/)) {\n          if (ez80 && stream.eat('.')) {\n            stream.eatWhile(/\\w/);\n          }\n          w = stream.current();\n\n          if (stream.indentation()) {\n            if ((state.context == 1 || state.context == 4) && variables1.test(w)) {\n              state.context = 4;\n              return 'var2';\n            }\n\n            if (state.context == 2 && variables2.test(w)) {\n              state.context = 4;\n              return 'var3';\n            }\n\n            if (keywords1.test(w)) {\n              state.context = 1;\n              return 'keyword';\n            } else if (keywords2.test(w)) {\n              state.context = 2;\n              return 'keyword';\n            } else if (state.context == 4 && numbers.test(w)) {\n              return 'number';\n            }\n\n            if (errors.test(w))\n              return 'error';\n          } else if (stream.match(numbers)) {\n            return 'number';\n          } else {\n            return null;\n          }\n        } else if (stream.eat(';')) {\n          stream.skipToEnd();\n          return 'comment';\n        } else if (stream.eat('\"')) {\n          while (w = stream.next()) {\n            if (w == '\"')\n              break;\n\n            if (w == '\\\\')\n              stream.next();\n          }\n          return 'string';\n        } else if (stream.eat('\\'')) {\n          if (stream.match(/\\\\?.'/))\n            return 'number';\n        } else if (stream.eat('.') || stream.sol() && stream.eat('#')) {\n          state.context = 5;\n\n          if (stream.eatWhile(/\\w/))\n            return 'def';\n        } else if (stream.eat('$')) {\n          if (stream.eatWhile(/[\\da-f]/i))\n            return 'number';\n        } else if (stream.eat('%')) {\n          if (stream.eatWhile(/[01]/))\n            return 'number';\n        } else {\n          stream.next();\n        }\n        return null;\n      }\n    };\n  });\n\n  CodeMirror.defineMIME(\"text/x-z80\", \"z80\");\n  CodeMirror.defineMIME(\"text/x-ez80\", { name: \"z80\", ez80: true });\n\n}"],"names":[],"mappings":"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"}