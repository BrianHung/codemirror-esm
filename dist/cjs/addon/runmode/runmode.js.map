{"version":3,"file":"runmode.js","sources":["../../../../src/addon/runmode/runmode.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/runmode/runmode.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.runMode = function(string, modespec, callback, options) {\n    var mode = CodeMirror.getMode(CodeMirror.defaults, modespec);\n    var tabSize = (options && options.tabSize) || CodeMirror.defaults.tabSize;\n\n    if (callback.appendChild) {\n      var ie = /MSIE \\d/.test(navigator.userAgent);\n      var ie_lt9 = ie && (document.documentMode == null || document.documentMode < 9);\n      var node = callback, col = 0;\n      node.innerHTML = \"\";\n      callback = function(text, style) {\n        if (text == \"\\n\") {\n          node.appendChild(document.createTextNode(ie_lt9 ? '\\r' : text));\n          col = 0;\n          return;\n        }\n        var content = \"\";\n        for (var pos = 0;;) {\n          var idx = text.indexOf(\"\\t\", pos);\n          if (idx == -1) {\n            content += text.slice(pos);\n            col += text.length - pos;\n            break;\n          } else {\n            col += idx - pos;\n            content += text.slice(pos, idx);\n            var size = tabSize - col % tabSize;\n            col += size;\n            for (var i = 0; i < size; ++i) content += \" \";\n            pos = idx + 1;\n          }\n        }\n        if (style) {\n          var sp = node.appendChild(document.createElement(\"span\"));\n          sp.className = \"cm-\" + style.replace(/ +/g, \" cm-\");\n          sp.appendChild(document.createTextNode(content));\n        } else {\n          node.appendChild(document.createTextNode(content));\n        }\n      };\n    }\n\n    var lines = CodeMirror.splitLines(string), state = (options && options.state) || CodeMirror.startState(mode);\n    for (var i = 0, e = lines.length; i < e; ++i) {\n      if (i) callback(\"\\n\");\n      var stream = new CodeMirror.StringStream(lines[i], null, {\n        lookAhead: function(n) { return lines[i + n] },\n        baseToken: function() {}\n      });\n      if (!stream.string && mode.blankLine) mode.blankLine(state);\n      while (!stream.eol()) {\n        var style = mode.token(stream, state);\n        callback(stream.current(), style, i, stream.start, state);\n        stream.start = stream.pos;\n      }\n    }\n  };\n\n}"],"names":[],"mappings":"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"}