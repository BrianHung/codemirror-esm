{"version":3,"file":"javascript-hint.js","sources":["../../../../src/addon/hint/javascript-hint.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/hint/javascript-hint.js\nexport default function(CodeMirror) {\n  var Pos = CodeMirror.Pos;\n\n  function forEach(arr, f) {\n    for (var i = 0, e = arr.length; i < e; ++i) f(arr[i]);\n  }\n\n  function arrayContains(arr, item) {\n    if (!Array.prototype.indexOf) {\n      var i = arr.length;\n      while (i--) {\n        if (arr[i] === item) {\n          return true;\n        }\n      }\n      return false;\n    }\n    return arr.indexOf(item) != -1;\n  }\n\n  function scriptHint(editor, keywords, getToken, options) {\n    var cur = editor.getCursor(), token = getToken(editor, cur);\n    if (/\\b(?:string|comment)\\b/.test(token.type)) return;\n    var innerMode = CodeMirror.innerMode(editor.getMode(), token.state);\n    if (innerMode.mode.helperType === \"json\") return;\n    token.state = innerMode.state;\n\n    if (!/^[\\w$_]*$/.test(token.string)) {\n      token = {start: cur.ch, end: cur.ch, string: \"\", state: token.state,\n        type: token.string == \".\" ? \"property\" : null};\n    } else if (token.end > cur.ch) {\n      token.end = cur.ch;\n      token.string = token.string.slice(0, cur.ch - token.start);\n    }\n\n    var tprop = token;\n    while (tprop.type == \"property\") {\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (tprop.string != \".\") return;\n      tprop = getToken(editor, Pos(cur.line, tprop.start));\n      if (!context) var context = [];\n      context.push(tprop);\n    }\n    return {list: getCompletions(token, context, keywords, options),\n      from: Pos(cur.line, token.start),\n      to: Pos(cur.line, token.end)};\n  }\n\n  function javascriptHint(editor, options) {\n    return scriptHint(editor, javascriptKeywords,\n      function (e, cur) {return e.getTokenAt(cur);},\n      options);\n  };\n  CodeMirror.registerHelper(\"hint\", \"javascript\", javascriptHint);\n\n  function getCoffeeScriptToken(editor, cur) {\n    var token = editor.getTokenAt(cur);\n    if (cur.ch == token.start + 1 && token.string.charAt(0) == '.') {\n      token.end = token.start;\n      token.string = '.';\n      token.type = \"property\";\n    }\n    else if (/^\\.[\\w$_]*$/.test(token.string)) {\n      token.type = \"property\";\n      token.start++;\n      token.string = token.string.replace(/\\./, '');\n    }\n    return token;\n  }\n\n  function coffeescriptHint(editor, options) {\n    return scriptHint(editor, coffeescriptKeywords, getCoffeeScriptToken, options);\n  }\n  CodeMirror.registerHelper(\"hint\", \"coffeescript\", coffeescriptHint);\n\n  var stringProps = (\"charAt charCodeAt indexOf lastIndexOf substring substr slice trim trimLeft trimRight \" +\n                     \"toUpperCase toLowerCase split concat match replace search\").split(\" \");\n  var arrayProps = (\"length concat join splice push pop shift unshift slice reverse sort indexOf \" +\n                    \"lastIndexOf every some filter forEach map reduce reduceRight \").split(\" \");\n  var funcProps = \"prototype apply call bind\".split(\" \");\n  var javascriptKeywords = (\"break case catch class const continue debugger default delete do else export extends false finally for function \" +\n                  \"if in import instanceof new null return super switch this throw true try typeof var void while with yield\").split(\" \");\n  var coffeescriptKeywords = (\"and break catch class continue delete do else extends false finally for \" +\n                  \"if in instanceof isnt new no not null of off on or return switch then throw true try typeof until void while with yes\").split(\" \");\n\n  function forAllProps(obj, callback) {\n    if (!Object.getOwnPropertyNames || !Object.getPrototypeOf) {\n      for (var name in obj) callback(name)\n    } else {\n      for (var o = obj; o; o = Object.getPrototypeOf(o))\n        Object.getOwnPropertyNames(o).forEach(callback)\n    }\n  }\n\n  function getCompletions(token, context, keywords, options) {\n    var found = [], start = token.string, global = options && options.globalScope || window;\n    function maybeAdd(str) {\n      if (str.lastIndexOf(start, 0) == 0 && !arrayContains(found, str)) found.push(str);\n    }\n    function gatherCompletions(obj) {\n      if (typeof obj == \"string\") forEach(stringProps, maybeAdd);\n      else if (obj instanceof Array) forEach(arrayProps, maybeAdd);\n      else if (obj instanceof Function) forEach(funcProps, maybeAdd);\n      forAllProps(obj, maybeAdd)\n    }\n\n    if (context && context.length) {\n      var obj = context.pop(), base;\n      if (obj.type && obj.type.indexOf(\"variable\") === 0) {\n        if (options && options.additionalContext)\n          base = options.additionalContext[obj.string];\n        if (!options || options.useGlobalScope !== false)\n          base = base || global[obj.string];\n      } else if (obj.type == \"string\") {\n        base = \"\";\n      } else if (obj.type == \"atom\") {\n        base = 1;\n      } else if (obj.type == \"function\") {\n        if (global.jQuery != null && (obj.string == '$' || obj.string == 'jQuery') &&\n            (typeof global.jQuery == 'function'))\n          base = global.jQuery();\n        else if (global._ != null && (obj.string == '_') && (typeof global._ == 'function'))\n          base = global._();\n      }\n      while (base != null && context.length)\n        base = base[context.pop().string];\n      if (base != null) gatherCompletions(base);\n    } else {\n      for (var v = token.state.localVars; v; v = v.next) maybeAdd(v.name);\n      for (var c = token.state.context; c; c = c.prev)\n        for (var v = c.vars; v; v = v.next) maybeAdd(v.name)\n      for (var v = token.state.globalVars; v; v = v.next) maybeAdd(v.name);\n      if (options && options.additionalContext != null)\n        for (var key in options.additionalContext)\n          maybeAdd(key);\n      if (!options || options.useGlobalScope !== false)\n        gatherCompletions(global);\n      forEach(keywords, maybeAdd);\n    }\n    return found;\n  }\n}"],"names":[],"mappings":"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"}