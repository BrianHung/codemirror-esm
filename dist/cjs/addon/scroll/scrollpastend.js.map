{"version":3,"file":"scrollpastend.js","sources":["../../../../src/addon/scroll/scrollpastend.js"],"sourcesContent":["// Source: https://github.com/codemirror/CodeMirror/tree/master/addon/scroll/scrollpastend.js\nexport default function(CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineOption(\"scrollPastEnd\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.off(\"change\", onChange);\n      cm.off(\"refresh\", updateBottomMargin);\n      cm.display.lineSpace.parentNode.style.paddingBottom = \"\";\n      cm.state.scrollPastEndPadding = null;\n    }\n    if (val) {\n      cm.on(\"change\", onChange);\n      cm.on(\"refresh\", updateBottomMargin);\n      updateBottomMargin(cm);\n    }\n  });\n\n  function onChange(cm, change) {\n    if (CodeMirror.changeEnd(change).line == cm.lastLine())\n      updateBottomMargin(cm);\n  }\n\n  function updateBottomMargin(cm) {\n    var padding = \"\";\n    if (cm.lineCount() > 1) {\n      var totalH = cm.display.scroller.clientHeight - 30,\n        lastLineH = cm.getLineHandle(cm.lastLine()).height;\n      padding = (totalH - lastLineH) + \"px\";\n    }\n    if (cm.state.scrollPastEndPadding != padding) {\n      cm.state.scrollPastEndPadding = padding;\n      cm.display.lineSpace.parentNode.style.paddingBottom = padding;\n      cm.off(\"refresh\", updateBottomMargin);\n      cm.setSize();\n      cm.on(\"refresh\", updateBottomMargin);\n    }\n  }\n}"],"names":[],"mappings":";;AAAA;AACe,uBAAS,UAAU,EAAE;AAEpC;AACA,EAAE,UAAU,CAAC,YAAY,CAAC,eAAe,EAAE,KAAK,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE;AACzE,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,UAAU,CAAC,IAAI,EAAE;AACvC,MAAM,EAAE,CAAC,GAAG,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AACjC,MAAM,EAAE,CAAC,GAAG,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;AAC5C,MAAM,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,GAAG,EAAE,CAAC;AAC/D,MAAM,EAAE,CAAC,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC;AAC3C,KAAK;AACL,IAAI,IAAI,GAAG,EAAE;AACb,MAAM,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC;AAChC,MAAM,EAAE,CAAC,EAAE,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;AAC3C,MAAM,kBAAkB,CAAC,EAAE,CAAC,CAAC;AAC7B,KAAK;AACL,GAAG,CAAC,CAAC;AACL;AACA,EAAE,SAAS,QAAQ,CAAC,EAAE,EAAE,MAAM,EAAE;AAChC,IAAI,IAAI,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE;AAC1D,QAAM,kBAAkB,CAAC,EAAE,CAAC,GAAC;AAC7B,GAAG;AACH;AACA,EAAE,SAAS,kBAAkB,CAAC,EAAE,EAAE;AAClC,IAAI,IAAI,OAAO,GAAG,EAAE,CAAC;AACrB,IAAI,IAAI,EAAE,CAAC,SAAS,EAAE,GAAG,CAAC,EAAE;AAC5B,MAAM,IAAI,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,QAAQ,CAAC,YAAY,GAAG,EAAE;AACxD,QAAQ,SAAS,GAAG,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC;AAC3D,MAAM,OAAO,GAAG,CAAC,MAAM,GAAG,SAAS,IAAI,IAAI,CAAC;AAC5C,KAAK;AACL,IAAI,IAAI,EAAE,CAAC,KAAK,CAAC,oBAAoB,IAAI,OAAO,EAAE;AAClD,MAAM,EAAE,CAAC,KAAK,CAAC,oBAAoB,GAAG,OAAO,CAAC;AAC9C,MAAM,EAAE,CAAC,OAAO,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,aAAa,GAAG,OAAO,CAAC;AACpE,MAAM,EAAE,CAAC,GAAG,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;AAC5C,MAAM,EAAE,CAAC,OAAO,EAAE,CAAC;AACnB,MAAM,EAAE,CAAC,EAAE,CAAC,SAAS,EAAE,kBAAkB,CAAC,CAAC;AAC3C,KAAK;AACL,GAAG;AACH;;;;"}